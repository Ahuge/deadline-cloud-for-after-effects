<!-- Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved. -->

<componentGroup>
    <name>deadline_cloud_for_after_effects</name>
    <description>Deadline Cloud for After Effects</description>
    <detailedDescription>After Effects plugin for submitting jobs to AWS Deadline Cloud.</detailedDescription>
    <canBeEdited>1</canBeEdited>
    <selected>0</selected>
    <show>1</show>
    <componentList>
        <component>
            <name>ae_2024</name>
            <description>After Effects 2024</description>
            <selected>0</selected>
             <parameterList>
                <!-- Script UI directory parameter for After Effects 2024 -->
                <directoryParameter value="">
                    <name>after_effects_script_ui_directory_2024</name>
                    <description>After Effects 2024 Script UI Directory</description>
                    <explanation>Path to the script UI directory in After Effects 2024 resources.</explanation>
                    <allowEmptyValue>1</allowEmptyValue>
                    <ask>yes</ask>
                    <!-- Set default paths right before this parameter page is shown in order to set default path values based on user input -->
                    <preShowPageActionList>
                        <if>
                            <conditionRuleList>
                                <compareText logic="equals" text="${installscope}" value="user"/>
                            </conditionRuleList>
                            <actionList>
                                <!-- For user installation, always set the default path -->
                                <setInstallerVariable>
                                    <name>after_effects_script_ui_directory_2024</name>
                                    <value>${installdir}/AE2024</value>
                                </setInstallerVariable>
                            </actionList>
                            <elseActionList>
                                <!-- For system installation, set the default path based on OS -->
                                <if>
                                    <conditionRuleList>
                                        <platformTest type="osx"/>
                                    </conditionRuleList>
                                    <actionList>
                                        <setInstallerVariable>
                                            <name>default_ae_script_ui_path_24</name>
                                            <value>/Applications/Adobe After Effects 2024/Scripts/ScriptUI Panels</value>
                                        </setInstallerVariable>
                                    </actionList>
                                    <elseActionList>
                                        <setInstallerVariable>
                                            <name>default_ae_script_ui_path_24</name>
                                            <value>C:\Program Files\Adobe\Adobe After Effects 2024\Support Files\Scripts\ScriptUI Panels</value>
                                        </setInstallerVariable>
                                    </elseActionList>
                                </if>
                                <!-- Check if the directory exists for system installs before setting install path as default -->
                                <if>
                                    <conditionRuleList>
                                        <fileExists>
                                            <path>${default_ae_script_ui_path_24}</path>
                                        </fileExists>
                                    </conditionRuleList>
                                    <actionList>
                                        <setInstallerVariable>
                                            <name>after_effects_script_ui_directory_2024</name>
                                            <value>${default_ae_script_ui_path_24}</value>
                                        </setInstallerVariable>
                                    </actionList>
                                </if>
                            </elseActionList>
                        </if>
                    </preShowPageActionList>
                </directoryParameter>
            </parameterList>
            <folderList>
                <!-- After Effects 2024 Submitter folder location -->
                <folder>
                    <description>After Effects 2024 Script UI Folder</description>
                    <destination>${after_effects_script_ui_directory_2024}</destination>
                    <name>aftereffects2024scriptuifolder</name>
                    <platforms>all</platforms>
                    <distributionFileList>
                        <distributionDirectory allowWildcards="1">
                            <origin>../dist/*</origin>
                        </distributionDirectory>
                    </distributionFileList>
                </folder>
            </folderList>
        </component>
        <component>
            <name>ae_2025</name>
            <description>After Effects 2025</description>
            <selected>0</selected>
            <parameterList>
                <!-- Script UI directory parameter for After Effects 2025 -->
                <directoryParameter value="">
                    <name>after_effects_script_ui_directory_2025</name>
                    <description>After Effects 2025 Script UI Directory</description>
                    <explanation>Path to the script UI directory in After Effects 2025 resources.</explanation>
                    <allowEmptyValue>1</allowEmptyValue>
                    <ask>yes</ask>
                    <!-- Set default paths right before this page is shown -->
                    <preShowPageActionList>
                        <if>
                            <conditionRuleList>
                                <compareText logic="equals" text="${installscope}" value="user"/>
                            </conditionRuleList>
                            <actionList>
                                <!-- For user installation, always set the default path -->
                                <setInstallerVariable>
                                    <name>after_effects_script_ui_directory_2025</name>
                                    <value>${installdir}/AE2025</value>
                                </setInstallerVariable>
                            </actionList>
                            <elseActionList>
                                <!-- For system installation, set the default path based on OS -->
                                <if>
                                    <conditionRuleList>
                                        <platformTest type="osx"/>
                                    </conditionRuleList>
                                    <actionList>
                                        <setInstallerVariable>
                                            <name>default_ae_script_ui_path_25</name>
                                            <value>/Applications/Adobe After Effects 2025/Scripts/ScriptUI Panels</value>
                                        </setInstallerVariable>
                                    </actionList>
                                    <elseActionList>
                                        <setInstallerVariable>
                                            <name>default_ae_script_ui_path_25</name>
                                            <value>C:\Program Files\Adobe\Adobe After Effects 2025\Support Files\Scripts\ScriptUI Panels</value>
                                        </setInstallerVariable>
                                    </elseActionList>
                                </if>
                                <!-- Check if the directory exists for system installs before setting install path as default -->
                                <if>
                                    <conditionRuleList>
                                        <fileExists>
                                            <path>${default_ae_script_ui_path_25}</path>
                                        </fileExists>
                                    </conditionRuleList>
                                    <actionList>
                                        <setInstallerVariable>
                                            <name>after_effects_script_ui_directory_2025</name>
                                            <value>${default_ae_script_ui_path_25}</value>
                                        </setInstallerVariable>
                                    </actionList>
                                </if>
                            </elseActionList>
                        </if>
                    </preShowPageActionList>
                </directoryParameter>
            </parameterList>
            <folderList>
                <!-- After Effects 2025 Submitter folder location -->
                <folder>
                    <description>After Effects 2025 Script UI Folder</description>
                    <destination>${after_effects_script_ui_directory_2025}</destination>
                    <name>aftereffects2025scriptuifolder</name>
                    <platforms>all</platforms>
                    <distributionFileList>
                        <distributionDirectory allowWildcards="1">
                            <origin>../dist/*</origin>
                        </distributionDirectory>
                    </distributionFileList>
                </folder>
            </folderList>
        </component>
    </componentList>
    <initializationActionList>
        <!-- Non-Linux OS validation -->
        <if>
            <conditionRuleList>
                <compareText>
                    <logic>does_not_contain</logic>
                    <text>${platform_name}</text>
                    <value>linux</value>
                </compareText>
            </conditionRuleList>
            <actionList>
                <setInstallerVariable name="all_components"
                    value="${all_components} deadline_cloud_for_after_effects" />
            </actionList>
            <elseActionList>
                <setInstallerVariable name="component(deadline_cloud_for_after_effects).show" value="0" />
            </elseActionList>
        </if>
    </initializationActionList>
    <parameterList>
        <stringParameter name="deadline_cloud_for_after_effects_summary" ask="0" cliOptionShow="0">
            <value>Deadline Cloud for After Effects 2024-2025
- Compatible with Adobe After Effects 2024-2025
- Registers the plug-in with After Effects by moving the script to the After Effects ScriptUI Panel directory.</value>
        </stringParameter>
    </parameterList>
    <shouldPackRuleList>
        <compareText>
            <logic>does_not_contain</logic>
            <text>${platform_name}</text>
            <value>linux</value>
        </compareText>
    </shouldPackRuleList>
</componentGroup>
